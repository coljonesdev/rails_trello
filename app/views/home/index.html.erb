<html lang="en">
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com/css?family=Schoolbell&display=swap" rel="stylesheet">

        <style>
            body{
                background: gray;
            }
            .container {
                font-family: 'Schoolbell', cursive;
                display: flex;
                flex-direction: row;
                justify-content: start;
                padding: 20px;
            }
            .list {
                background: #80AEE8;
                flex-basis: 18%;
                border-radius: 12px;
                padding: 5px;
                margin: 5px;
            }
            # .columnTwo {
            #     border: 2px dashed blue;
            #     background: blue;
            #     flex-basis: 18%;
            #     border-radius: 12px;
            #     padding: 5px;
            # }
            # .columnThree {
            #     border: 2px solid purple;
            #     background: purple;
            #     flex-basis: 18%;
            #     border-radius: 12px;
            #     padding: 5px;
            # }
            # .columnFour {
            #     border: 2px dotted yellow;
            #     background: yellow;
            #     flex-basis: 18%;
            #     border-radius: 12px;
            #     padding: 5px;

            # }
            # .columnFive{
            #     border: 2px solid pink;
            #     background: pink;
            #     flex-basis: 18%;
            #     border-radius: 12px;
            #     padding: 5px;
            # }
            .card {
                margin-bottom: 15px;
                padding: 5px;
                border:orange 2px solid;
                background: orange;
                transition: background 0.125s, box-shadow 0.125s, transform 0.125s ease-in-out;
            }
            .card:hover {
                background: #FFBE00;
                box-shadow: 3px 3px 8px;
                transform: scale(1.025, 1.025);
            }

        </style>
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script>
        $( function() {
        //   $( ".listItems" ).sortable();
          $( ".listItems" ).sortable({
                start: function(event, ui) {
                    ui.item.startPos = ui.item.index();
                },
                stop: function(event, ui) {
                    let endPos = ui.item.index();
                    // let path = "/home/reorder?" + `start=${ui.item.startPos}&dest=${endPos}`;

                    // const url = new URL(location);
                    // url.searchParams.set('reorderStart', ui.item.startPos);
                    // url.searchParams.set('reorderEnd', endPos);
                    // location = url;

                    // go to URL "/home/reorder?start=[startPos]&dest=[endPos]"
                }
            });
          $( ".listItems" ).disableSelection();
        } );
        </script>
    </head>
    <body>
        <div class="container">
            <% @lists.each do |list| %>
                <div class="list">
                    <h2><%= list.title %></h2>

                    <div class="listItems">
                        <% myCards = (list.cards).sort_by &:order %>
                        <% myCards.each do |card| %>
                            <div class="card"><%= card.content %> [order <%= card.order %>]</div>
                        <% end %>
                    </div>
                    
                    <div class="card">
                        <form method="post" action="<%= list_cards_path(list.id) %>">
                            <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>" />
                            <textarea cols="30" rows="3" placeholder="Enter your favorite content" name="content"></textarea>
                            <button type="submit">content!</button>
                        </form>
                    </div>
                </div>
            <% end %>
        </div>
    </body>
</html>